# Builder
#FROM docker.io/library/openjdk:8-jdk-alpine AS builder
#RUN apk --update add git && \
#    rm -rf /var/lib/apt/lists/* && \
#    rm /var/cache/apk/*
#RUN git clone https://github.com/ahmad4fifz/CVE-2021-44228-vuln-app /app
#WORKDIR /app/app
#RUN chmod +x gradlew
#RUN ./gradlew clean build

# Deploy
FROM docker.io/library/openjdk:8-jdk-alpine
#COPY --from=builder /app/app/build/libs/spring-boot-0.0.1-SNAPSHOT.jar /app/app.jar
ENV TZ=Asia/Kuala_Lumpur
RUN apk update && \
    apk add --update --no-cache tzdata && \
    rm -rf /var/lib/apt/lists/* && \
    rm -rf /var/cache/apk/*
COPY app.jar /app/jar
WORKDIR /app
EXPOSE 8080
ENTRYPOINT ["java","-Duser.timezone=Asia/Kuala_Lumpur","-jar","app.jar"]